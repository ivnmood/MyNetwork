(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[0],{112:function(e,t,a){e.exports=a.p+"static/media/user.129ab51c.png"},113:function(e,t,a){e.exports={error:"Login_error__2Jrmy"}},122:function(e,t,a){e.exports={loginBlock:"Header_loginBlock__3PvLE",loginBlockInfo:"Header_loginBlockInfo__1eSjs"}},153:function(e,t,a){e.exports={content:"MyPosts_content__3mpC1"}},198:function(e,t,a){e.exports={friend:"Friend_friend__2u-CS"}},205:function(e,t,a){},206:function(e,t,a){e.exports={loader:"preloader_loader__Rjbiw"}},208:function(e,t,a){e.exports={selectPage:"Paginator_selectPage__2SMEa",paginator:"Paginator_paginator__2_-tA",pageNumber:"Paginator_pageNumber__3Hz1B",selectedPage:"Paginator_selectedPage__265NH",pagination:"Paginator_pagination__2OVDF"}},249:function(e,t,a){e.exports=a(435)},251:function(e,t,a){},42:function(e,t,a){e.exports={dialogs:"Messages_dialogs__3aWY9",dialogsItems:"Messages_dialogsItems__2xIb5",Item:"Messages_Item__1Ol4C",active:"Messages_active__3Jn-D",message:"Messages_message__Ml8ZX"}},434:function(e,t,a){},435:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);a(251),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(13),l=a.n(o),s=(a(125),a(436)),c=a(12),u=a(62),i=a.n(u),m=a(17),f=a(198),d=a.n(f),p=function(e){return r.a.createElement("div",{className:d.a.friend},r.a.createElement("img",{src:"https://vignette.wikia.nocookie.net/avatar/images/1/1b/%D0%9A1%D1%8501_%D0%9A%D0%BE%D1%80%D1%80%D0%B0_%D0%BF%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82.jpg/revision/latest?cb=20160308145916&path-prefix=ru",alt:""}),e.name)},E=a(440),g=a(438),h=function(e){e.friendsData.map((function(e){return r.a.createElement(p,{name:e.name})}));return r.a.createElement(g.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(g.a.Item,{key:"1",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/profile",activeClassName:i.a.active},"Profile")),r.a.createElement(g.a.Item,{key:"2",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/messages",activeClassName:i.a.active},"Messages")),r.a.createElement(g.a.Item,{key:"3",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/users",activeClassName:i.a.active},"Users")),r.a.createElement(g.a.Item,{key:"4",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/news",activeClassName:i.a.active},"News")),r.a.createElement(g.a.Item,{key:"5",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/music",activeClassName:i.a.active},"Music")),r.a.createElement(g.a.Item,{key:"6",icon:r.a.createElement(E.a,null)},r.a.createElement(m.b,{to:"/settings",activeClassName:i.a.active},"Settings")))},v=Object(c.b)((function(e){return{friendsData:e.sidebar.friendsData}}),(function(){return{}}))(h),b=v,_=a(122),O=a.n(_),S=a(439),P=function(e){return r.a.createElement("header",{className:O.a.header},r.a.createElement("div",{className:O.a.loginBlock},e.isAuth?r.a.createElement("div",null," ",r.a.createElement("strong",{className:O.a.loginBlockInfo},e.login)," - ",r.a.createElement(S.a,{type:"link",onClick:e.logout},"Log Out")):r.a.createElement(m.b,{to:"/login"}," ",r.a.createElement(S.a,{type:"link"},"Login"))))},w=a(7),y=a.n(w),j=a(18),k=a(15),C=a(204),I=C.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"7178d77c-d634-460c-94ef-2f90ebb75b52"}}),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return I.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},D={unfollowUser:function(e){return I.delete("follow/".concat(e))},followUser:function(e){return I.post("follow/".concat(e))}},N=function(e){return I.get("profile/"+e)},A=function(e){return I.get("profile/status/"+e)},x=function(e){return I.put("profile/status",{status:e})},M=function(e){return I.put("profile",e)},T=function(e){var t=new FormData;return t.append("data",e),I.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},F=function(){return I.get("auth/me")},L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n})},z=function(){return I.delete("auth/login")},B=function(){return I.get("security/get-captcha-url")},G=a(31),R={id:null,login:null,email:null,isAuth:!1,captchaUrl:null},H=function(e,t,a,n){return{type:"SET_USER_DATA",data:{id:e,email:t,login:a,isAuth:n}}},V=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",captchaUrl:e}},W=function(){return function(){var e=Object(j.a)(y.a.mark((function e(t){var a,n,r,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:0===(a=e.sent).data.resultCode&&(n=a.data.data,r=n.id,o=n.email,l=n.login,t(H(r,o,l,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(){return function(){var e=Object(j.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:a=e.sent,n=a.data.url,t(V(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(k.a)({},e,{},t.data);case"GET_CAPTCHA_URL_SUCCESS":return Object(k.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},K=Object(c.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:0===e.sent.data.resultCode&&t(H(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return r.a.createElement(P,e)})),X=a(50),q=a(109),Y=a(110),Q=a(120),$=a(121),ee=a(205),te=a.n(ee),ae=a(93),ne=a(61),re=a.n(ne),oe=a(441),le=a(206),se=a.n(le),ce=function(){return r.a.createElement("div",{className:se.a.loader},r.a.createElement(oe.a,null))},ue=a(112),ie=a.n(ue),me=a(58),fe=function(e){var t=e.activateEditMode,a=Object(me.a)(e,["activateEditMode"]);return r.a.createElement("div",null,r.a.createElement("b",null,"Status: ")," ",r.a.createElement("span",{onClick:t},a.status||"-----"))},de=function(e){var t=e.deactivateEditMode,a=e.onStatusChange,n=e.status;return r.a.createElement("div",null,r.a.createElement("b",null,"Status: ")," ",r.a.createElement("input",{autoFocus:!0,onBlur:t,onChange:a,value:n}))},pe=function(e){var t=Object(n.useState)(!1),a=Object(ae.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(e.status),c=Object(ae.a)(s,2),u=c[0],i=c[1];Object(n.useEffect)((function(){i(e.status)}),[e.status]);var m=function(){l(!0)};return r.a.createElement("div",null,!o&&r.a.createElement(fe,{activateEditMode:m,status:e.status}),o&&e.isOwner&&r.a.createElement(de,{deactivateEditMode:function(){l(!1),e.updateStatus(u)},status:u,onStatusChange:function(e){i(e.currentTarget.value)}}),o&&!e.isOwner&&r.a.createElement(fe,{activateEditMode:m,status:e.status}))},Ee=a(194),ge=a(195),he=function(e){var t=e.input,a=e.meta,n=Object(me.a)(e,["input","meta"]),o=a.touched&&a.error;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("textarea",Object.assign({},t,n))),o&&r.a.createElement("span",null,a.error))},ve=function(e){var t=e.input,a=e.meta,n=Object(me.a)(e,["input","meta"]),o=a.touched&&a.error;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,n))),o&&r.a.createElement("span",null,a.error))},be=a(113),_e=a.n(be),Oe=Object(ge.a)({form:"editProfile"})((function(e){var t=e.handleSubmit,a=e.profile,n=e.error;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,n&&r.a.createElement("div",{className:_e.a.error},n)),r.a.createElement("div",null,r.a.createElement("b",null,"Full Name: "),r.a.createElement(Ee.a,{name:"fullName",placeholder:"Full Name",component:ve,validate:[]})),r.a.createElement("div",null,r.a.createElement("b",null,"aboutMe: "),r.a.createElement(Ee.a,{name:"aboutMe",placeholder:"About Me",component:he,validate:[]})),r.a.createElement("div",null,r.a.createElement("b",null,"look for work: "),r.a.createElement(Ee.a,{name:"lookingForAJob",type:"checkbox",component:ve})),r.a.createElement("div",null,r.a.createElement("b",null,"Skills: "),r.a.createElement(Ee.a,{name:"lookingForAJobDescription",placeholder:"skills",component:he,validate:[]})),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts: ")," ",Object.keys(a.contacts).map((function(e){return r.a.createElement("div",{key:e,className:re.a.contact},r.a.createElement("b",null,e,":  ",r.a.createElement(Ee.a,{name:"contacts."+e,placeholder:e,component:ve})))}))),r.a.createElement("div",null,r.a.createElement("button",null,"Save")))})),Se=function(e){var t=e.profile,a=e.isOwner,n=e.goToEditMode;return r.a.createElement("div",{className:re.a.AvatarAndDescription},r.a.createElement("div",null,r.a.createElement("b",null,"Name: ")," ",t.fullName),r.a.createElement("div",null,r.a.createElement("b",null,"aboutMe: ")," ",t.aboutMe),r.a.createElement("div",null,r.a.createElement("b",null,"look for work: "),t.lookingForAJob?"yes":"no"),r.a.createElement("div",null,r.a.createElement("b",null,"Skills: "),t.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts: ")," ",Object.keys(t.contacts).map((function(e){return r.a.createElement(Pe,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Edit")))},Pe=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",{className:re.a.contact},r.a.createElement("b",null,t,": ")," ",a)},we=function(e){var t=Object(n.useState)(!1),a=Object(ae.a)(t,2),o=a[0],l=a[1];if(!e.profile)return r.a.createElement(ce,null);return r.a.createElement("div",{className:re.a.ProfileInfo},r.a.createElement("div",null,r.a.createElement("img",{src:null!=e.profile.photos.large?e.profile.photos.large:ie.a,alt:""}),r.a.createElement("br",null),r.a.createElement("div",{className:re.a.ImageButton},e.isOwner&&r.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}}))),r.a.createElement("div",null,r.a.createElement(pe,{status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner}),o?r.a.createElement(Oe,{initialValues:e.profile,profile:e.profile,onSubmit:function(t){e.saveProfile(t).then((function(){l(!1)}))}}):r.a.createElement(Se,{goToEditMode:function(){l(!0)},profile:e.profile,isOwner:e.isOwner})))},ye=a(57),je={postData:[{message:"It's my first post",likesCount:"456"},{message:"Olelelelelel1",likesCount:"50"}],profile:null,status:""},ke=function(e){return{type:"SET_STATUS",status:e}},Ce=function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={message:t.newPostElement,likesCount:0};return Object(k.a)({},e,{postData:[].concat(Object(ye.a)(e.postData),[a])});case"SET_USER_PROFILE":return Object(k.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(k.a)({},e,{status:t.status});case"SAVE_PHOTO_SUCCESS":return Object(k.a)({},e,{profile:Object(k.a)({},e.profile,{photos:t.photos})});default:return e}},Ue=a(153),De=a.n(Ue),Ne=a(95),Ae=a.n(Ne),xe=function(e){return r.a.createElement("div",{className:Ae.a.post},r.a.createElement("img",{src:"https://i.ytimg.com/vi/fUWrhetZh9M/maxresdefault.jpg",alt:""}),r.a.createElement("span",{className:Ae.a.message}," ",e.message," ")," ",r.a.createElement("br",null),r.a.createElement("button",{className:Ae.a.button},"Like"),r.a.createElement("span",{className:Ae.a.likes},e.likes))},Me=function(e){if(!e)return"Field is required"},Te=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},Fe=Te(10),Le=Object(ge.a)({form:"AddPostForm",onSubmitSuccess:function(e,t){return t(Object(G.a)("AddPostForm"))}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(Ee.a,{name:"newPostElement",placeholder:"Enter your text",component:he,validate:[Me,Fe]}),r.a.createElement("button",{className:De.a.button},"Add Post"))})),ze=function(e){var t=e.postData.map((function(e){return r.a.createElement(xe,{key:e,message:e.message,likes:e.likesCount})}));return r.a.createElement("div",{className:De.a.content},r.a.createElement("div",null,r.a.createElement("b",null,r.a.createElement("h1",null,"My Posts:")),r.a.createElement(Le,{onSubmit:function(t){e.addPost(t.newPostElement)}})),r.a.createElement("div",null,t))},Be=Object(c.b)((function(e){return{postData:e.profilePage.postData}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostElement:e}}(t))}}}))(ze),Ge=function(e){return r.a.createElement("div",{className:te.a.content},r.a.createElement(we,{saveProfile:e.saveProfile,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto}),r.a.createElement(Be,null))},Re=a(8),He=function(e){return{isAuth:e.auth.isAuth}},Ve=function(e){var t=function(t){Object($.a)(n,t);var a=Object(Q.a)(n);function n(){return Object(q.a)(this,n),a.apply(this,arguments)}return Object(Y.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(X.a,{to:"/login"})}}]),n}(r.a.Component);return Object(c.b)(He)(t)},We=function(e){Object($.a)(a,e);var t=Object(Q.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.autorizedId)||this.props.history.push("/login"),this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement(Ge,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,isAuth:this.props.isAuth}))}}]),a}(r.a.PureComponent),Je=Object(Re.d)(Object(c.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedId:e.auth.id,isAuth:e.auth.isAuth}}),{getProfile:Ce,getStatus:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:n=t.sent,a(ke(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:0===t.sent.data.resultCode&&a(ke(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:0===(n=t.sent).data.resultCode&&a({type:"SAVE_PHOTO_SUCCESS",photos:n.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a,n){var r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.id,t.next=3,M(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}a(Ce(r)),t.next=10;break;case 8:return a(Object(G.b)("editProfile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),X.g,Ve)(We),Ze={DialogsData:[{name:"Dima",id:"2"},{name:"Vasya",id:"3"},{name:"Gordon",id:"4"},{name:"Vladimir",id:"5"}],MessagesData:[{message:"Hello"},{message:"Hello, it's my first message"},{message:"Lokolokolkol"}]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var a={message:t.newMessageBody};return Object(k.a)({},e,{MessagesData:[].concat(Object(ye.a)(e.MessagesData),[a])});default:return e}},Xe=a(42),qe=a.n(Xe),Ye=function(e){return r.a.createElement("div",{className:qe.a.message},e.message)},Qe=function(e){var t="/messages/"+e.id;return r.a.createElement("div",{className:qe.a.Item},r.a.createElement(m.b,{to:t,activeClassName:qe.a.active},e.name))},$e=Te(100),et=Object(ge.a)({form:"AddMessageForm",onSubmitSuccess:function(e,t){return t(Object(G.a)("AddMessageForm"))}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(Ee.a,{component:he,name:"newMessageBody",placeholder:"Enter your message",validate:[Me,$e]}),r.a.createElement("button",null,"Send"))})),tt=function(e){var t=e.DialogsData.map((function(e){return r.a.createElement(Qe,{key:e,name:e.name,id:e.id})})),a=e.MessagesData.map((function(e){return r.a.createElement(Ye,{key:e,message:e.message})}));return r.a.createElement("div",null,r.a.createElement("div",{className:qe.a.dialogs},r.a.createElement("div",{className:qe.a.dialogsItems},t),r.a.createElement("div",{className:qe.a.messages},r.a.createElement("div",null,a),r.a.createElement(et,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}}))))},at=Object(Re.d)(Object(c.b)((function(e){return{DialogsData:e.messagesPage.DialogsData,MessagesData:e.messagesPage.MessagesData,newMessageBody:e.messagesPage.newMessageBody}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"SEND-MESSAGE",newMessageBody:e}}(t))}}})),Ve)(tt),nt=function(e){var t=e.friendsData.map((function(e){return r.a.createElement(p,{name:e.name})}));return r.a.createElement("div",null,t)},rt=Object(c.b)((function(e){return{friendsData:e.sidebar.friendsData}}),(function(){return{}}))(nt),ot=a(208),lt=a.n(ot),st=a(437),ct=function(e){var t=e.currentPage,a=e.totalItemsCount,n=e.onPageChanged,o=e.pageSize;return r.a.createElement("div",{className:lt.a.pagination},r.a.createElement(st.a,{simple:!0,defaultCurrent:t,total:a,onChange:n,current:t,defaultPageSize:o}))},ut=a(92),it=a.n(ut),mt=function(e){var t=e.user,a=e.followingInProgress,n=e.unfollowUser,o=e.followUser;return r.a.createElement("div",{className:it.a.userInfo},r.a.createElement("div",null,r.a.createElement(m.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:ie.a,alt:"",className:it.a.userPhoto}))),r.a.createElement("div",null,r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),onClick:function(){n(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),onClick:function(){o(t.id)}},"Follow")),r.a.createElement("span",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status))))},ft=function(e){var t=e.currentPage,a=e.totalUsersCount,n=e.pageSize,o=e.onPageChanged,l=Object(me.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged"]);return r.a.createElement("div",null,r.a.createElement(ct,{currentPage:t,totalItemsCount:a,pageSize:n,onPageChanged:o}),r.a.createElement("div",{className:it.a.users},l.users.map((function(e){return r.a.createElement(mt,{user:e,key:e.id,followingInProgress:l.followingInProgress,unfollowUser:l.unfollowUser,followUser:l.followUser})}))))},dt=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(k.a)({},e,{},n):e}))},pt={users:[],pageSize:12,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Et=function(e){return{type:"FOLLOW",userId:e}},gt=function(e){return{type:"UNFOLLOW",userId:e}},ht=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},vt=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},bt=function(){var e=Object(j.a)(y.a.mark((function e(t,a,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(vt(!0,a)),e.next=3,n(a);case 3:0===e.sent.data.resultCode&&t(r(a)),t(vt(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(k.a)({},e,{users:dt(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(k.a)({},e,{users:dt(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(k.a)({},e,{users:Object(ye.a)(t.users)});case"SET_CURRENT_PAGE":return Object(k.a)({},e,{currentPage:t.currentPage});case"SET_USERS_TOTAL_COUNT":return Object(k.a)({},e,{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(k.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(k.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(ye.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},Ot=function(e){return e.usersPage.users},St=function(e){return e.usersPage.pageSize},Pt=function(e){return e.usersPage.totalUsersCount},wt=function(e){return e.usersPage.currentPage},yt=function(e){return e.usersPage.isFetching},jt=function(e){return e.usersPage.followingInProgress},kt=Object(Re.d)(Object(c.b)((function(e){return{users:Ot(e),pageSize:St(e),totalUsersCount:Pt(e),currentPage:wt(e),isFetching:yt(e),followingInProgress:jt(e)}}),{setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},getUsers:function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ht(!0)),a.next=3,U(e,t);case 3:r=a.sent,n(ht(!1)),n({type:"SET_USERS",users:r.items}),n({type:"SET_USERS_TOTAL_COUNT",totalUsersCount:r.totalCount});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},followUser:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(a,e,D.followUser.bind(D),Et);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowUser:function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(a,e,D.unfollowUser.bind(D),gt);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ve)((function(e){Object(n.useEffect)((function(){var t=e.currentPage,a=e.pageSize;e.getUsers(t,a)}),[e.currentPage]);return r.a.createElement(r.a.Fragment,null,e.isFetching?r.a.createElement(ce,null):null,r.a.createElement(ft,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:function(t){e.setCurrentPage(t),e.getUsers(t,e.pageSize)},users:e.users,toggleFollowingProgress:e.toggleFollowingProgress,followingInProgress:e.followingInProgress,followUser:e.followUser,unfollowUser:e.unfollowUser}))})),Ct=Object(ge.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(Ee.a,{name:"email",placeholder:"email",component:ve,validate:[Me]})),r.a.createElement("div",null,r.a.createElement(Ee.a,{name:"password",placeholder:"password",component:ve,validate:[Me],type:"password"})),r.a.createElement("div",null,r.a.createElement(Ee.a,{name:"rememberMe",type:"checkbox",component:ve})," ",r.a.createElement("span",null,"remember me")),n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&r.a.createElement(Ee.a,{name:"captcha",placeholder:"Symbols from image",component:ve,validate:[Me]}),r.a.createElement("div",null,a&&r.a.createElement("div",{className:_e.a.error},a)),r.a.createElement("div",null,r.a.createElement("button",null,"login")))})),It=Object(c.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,a,n){return function(){var r=Object(j.a)(y.a.mark((function r(o){var l,s;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L(e,t,a,n);case 2:0===(l=r.sent).data.resultCode?o(W()):(10===l.data.resultCode&&o(J()),s=l.data.messages.length>0?l.data.messages[0]:"Some error",o(Object(G.b)("login",{_error:s})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(X.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(Ct,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),Ut={initialized:!1},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(k.a)({},e,{initialized:!0});default:return e}},Nt={friendsData:[{name:"Dima"},{name:"Vasya"},{name:"Gordon"},{name:"Vladimir"}]},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;arguments.length>1&&arguments[1];return e},xt=a(219),Mt=a(196),Tt=Object(Re.c)({profilePage:Ie,messagesPage:Ke,sidebar:At,usersPage:_t,auth:Z,form:Mt.a,app:Dt}),Ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.d,Lt=Object(Re.e)(Tt,Ft(Object(Re.a)(xt.a))),zt=(a(434),r.a.lazy((function(){return a.e(3).then(a.bind(null,442))}))),Bt=r.a.lazy((function(){return a.e(5).then(a.bind(null,443))})),Gt=r.a.lazy((function(){return a.e(4).then(a.bind(null,444))})),Rt=s.a.Header,Ht=s.a.Content,Vt=s.a.Footer,Wt=s.a.Sider,Jt=Object(Re.d)(X.g,Object(c.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(j.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(W()),e.next=3,a;case 3:t({type:"INITIALIZED_SUCCESS"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(e){var t=e.initializeApp,a=e.initialized;return Object(n.useEffect)((function(){t()}),[t]),a?r.a.createElement(s.a,null,r.a.createElement(Wt,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)}},r.a.createElement("div",{className:"logo"},r.a.createElement("h2",null,"#Stay at Home")),r.a.createElement(b,null)),r.a.createElement(s.a,null,r.a.createElement(Rt,{className:"site-layout-sub-header-background",style:{padding:0}},r.a.createElement(K,null)),r.a.createElement(Ht,{style:{margin:"24px 16px 0"}},r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:"100vh"}},r.a.createElement(X.d,null,r.a.createElement(X.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Je,null)}}),r.a.createElement(X.b,{path:"/messages",render:function(){return r.a.createElement(at,null)}}),r.a.createElement(X.b,{path:"/news",render:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(ce,null)},r.a.createElement(Gt,null))}}),r.a.createElement(X.b,{path:"/music",render:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(ce,null)},r.a.createElement(zt,null))}}),r.a.createElement(X.b,{path:"/settings",render:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(ce,null)},r.a.createElement(Bt,null))}}),r.a.createElement(X.b,{path:"/friends",render:function(){return r.a.createElement(rt,null)}}),r.a.createElement(X.b,{path:"/users",render:function(){return r.a.createElement(kt,null)}}),r.a.createElement(X.b,{path:"/login",render:function(){return r.a.createElement(It,null)}}),r.a.createElement(X.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(X.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))),r.a.createElement(Vt,{style:{textAlign:"center"}},"Created by Ivan Sidarau \xa92020"))):r.a.createElement(ce,null)})),Zt=function(){return r.a.createElement(m.a,null,r.a.createElement(c.a,{store:Lt},r.a.createElement(Jt,null)))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports={AvatarAndDescription:"ProfileInfo_AvatarAndDescription__3yGEV",contact:"ProfileInfo_contact__1ZPh9",ProfileInfo:"ProfileInfo_ProfileInfo__2U5q8",ImageButton:"ProfileInfo_ImageButton__10s-s"}},62:function(e,t,a){e.exports={nav:"Sidebar_nav__3tK8V",link:"Sidebar_link__1QDzM",active:"Sidebar_active__h1Sbz",friends:"Sidebar_friends__2cw99",pageConstrain:"Sidebar_pageConstrain__lESm1"}},92:function(e,t,a){e.exports={userPhoto:"users_userPhoto__2KApp",users:"users_users__3aAVp",userInfo:"users_userInfo___ZnPN"}},95:function(e,t,a){e.exports={post:"Post_post__14LW4",likes:"Post_likes__1-SBD",button:"Post_button__bDfp2",message:"Post_message__3Oyep"}}},[[249,1,2]]]);
//# sourceMappingURL=main.ab360934.chunk.js.map